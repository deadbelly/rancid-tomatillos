(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{59:function(e,t,r){},61:function(e,t,r){"use strict";r.r(t);var s=r(0),n=r(1),i=r.n(n),a=r(23),c=r.n(a),o=r(11),l=r(12),u=r(14),h=r(13),j=r(8),d=function(e){var t=e.searchQuery,r=e.updateQuery,n=e.sort,i=e.updateSort;return Object(s.jsxs)("header",{children:[Object(s.jsxs)("h1",{children:["Rancid",Object(s.jsx)("img",{className:"icon",src:"./tomatillo.png",alt:"green tomato icon"}),"Tomatillos"]}),Object(s.jsx)(j.b,{to:"/",children:Object(s.jsx)("button",{children:"HOME"})}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{type:"text",placeholder:"Search Movies By Title","aria-label":"Search Movies By Title",value:t,onChange:function(e){return r(e.target.value)}}),Object(s.jsxs)("div",{className:"sort",children:[Object(s.jsx)("label",{htmlFor:"sort-options",children:"Sort movies by "}),Object(s.jsxs)("select",{name:"sort-options",value:n,onChange:function(e){return i(e.target.value)},children:[Object(s.jsx)("option",{value:"average_rating",children:"Freshness"}),Object(s.jsx)("option",{value:"release_date",children:"Date"}),Object(s.jsx)("option",{value:"title",children:"Title"})]})]})]})]})},b=function(e){var t=e.id,r=e.title,n=e.rating,i=e.imgSrc;return Object(s.jsxs)(j.b,{className:"poster",to:"/".concat(t),children:[Object(s.jsx)("img",{className:"poster-img",src:i,alt:r}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["Freshness: ",10*n.toFixed(2),"%"]}),Object(s.jsx)("h2",{className:r.length>25?"long-title":"",children:r})]})]})},m={filterMovies:function(e,t){return e.filter((function(e){var r=e.title.toLowerCase(),s=t.toLowerCase();return r.includes(s)}))},sortBy:{average_rating:function(e){return e.sort((function(e,t){return t.average_rating-e.average_rating}))},release_date:function(e){return e.map((function(e){return"string"===typeof e.release_date&&(e.release_date=parseInt(e.release_date.split("-").join(""))),e})).sort((function(e,t){return t.release_date-e.release_date}))},title:function(e){return e.sort((function(e,t){return e.title.localeCompare(t.title,{sensitivity:"base"})}))}}},v=function(e){var t=e.movies,r=e.searchQuery,n=e.sort;return t=m.filterMovies(t,r),t=m.sortBy[n](t),Object(s.jsx)("div",{className:"poster-grid",children:t.map((function(e){return Object(s.jsx)(b,{id:e.id,title:e.title,rating:e.average_rating,imgSrc:e.poster_path},e.id)}))})},p=r(25),x=function(e){var t=e.movie,r=e.videos,n=new Date(t.release_date).toDateString(),i=t.genres.join(" "),a={height:"350",width:"390"};return Object(s.jsxs)("section",{children:[Object(s.jsxs)("article",{className:"movie-spec movie-container",tabIndex:"0",children:[Object(s.jsx)("h2",{className:t.title.length>=20?"long-movie-title":"movie-title",children:t.title}),Object(s.jsx)("img",{className:"backdrop-img",src:t.backdrop_path,alt:"".concat(t.title," promo still")}),Object(s.jsx)("h3",{children:t.tagline}),Object(s.jsx)("p",{className:"overview",children:t.overview})]}),Object(s.jsxs)("article",{className:"movie-info movie-container",tabIndex:"0",children:[Object(s.jsx)("h2",{children:"Stats"}),Object(s.jsxs)("div",{className:"movie-stats",children:[Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Freshness:"})," ",10*t.average_rating.toFixed(2),"%"]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Release Date:"})," ",n]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Genres:"})," ",i]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Runtime:"})," ",t.runtime," minutes"]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Budget:"})," $",(new Intl.NumberFormat).format(t.budget)]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Revenue:"})," $",(new Intl.NumberFormat).format(t.revenue)]})]}),Object(s.jsx)("h2",{children:"Trailers & Clips"}),Object(s.jsx)("div",{className:"trailer-container movie-container",tabIndex:"0",children:r.length&&r.map((function(e){return Object(s.jsx)(p.a,{videoId:e.key,opts:a},e.id)}))})]})]})},O=function(e){var t=e.status,r=e.text;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h1",{className:"error-status",children:[t," - ",r]}),Object(s.jsxs)("p",{className:"error-expl",children:[404===t&&"What you're looking for isn't here. Double Check the url and try again.",t>=500&&t<600&&"Something went wrong on our end. Try reloading the page. If the problem persists try back later."]})]})},g={checkResponse:function(e){if(e.ok)return e.json();throw e},getAllMovies:function(){var e=this;return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies").then((function(t){return e.checkResponse(t)}))},getSelectedMovie:function(e){var t=this;return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e)).then((function(e){return t.checkResponse(e)}))},getVideos:function(e){var t=this;return fetch("https://rancid-tomatillos.herokuapp.com/api/v2//movies/".concat(e,"/videos")).then((function(e){return t.checkResponse(e)}))}},f=r(10),y=function(e){Object(u.a)(r,e);var t=Object(h.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.call(this)).state={selectedDetails:null,videos:[],error:null},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;Object(f.trackPromise)(Promise.all([g.getSelectedMovie(t),g.getVideos(t)]).then((function(t){e.setState({selectedDetails:t[0].movie}),e.setState({videos:t[1].videos})})).catch((function(t){return e.setState({error:t})})))}},{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[this.state.error&&Object(s.jsx)(O,{status:this.state.error.status,text:this.state.error.statusText}),this.state.selectedDetails&&Object(s.jsx)(x,{movie:this.state.selectedDetails,videos:this.state.videos})]})}}]),r}(i.a.Component),k=r(28),S=r.n(k),N=function(){return Object(s.jsx)("div",{children:Object(s.jsx)(S.a,{loading:Object(f.usePromiseTracker)().promiseInProgress,color:"#BFDF8E",size:"40vh"})})},_=r(2),w=function(e){Object(u.a)(r,e);var t=Object(h.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.call(this)).updateQuery=function(t){e.setState({searchQuery:t})},e.updateSort=function(t){e.setState({sort:t})},e.state={movies:[],error:null,searchQuery:"",sort:"average_rating"},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this;Object(f.trackPromise)(g.getAllMovies().then((function(t){return e.setState({movies:t.movies,selectedDetails:null})})).catch((function(t){return e.setState({error:t})})))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(d,{searchQuery:this.state.searchQuery,updateQuery:this.updateQuery,sort:this.state.sort,updateSort:this.updateSort}),Object(s.jsxs)("main",{children:[Object(s.jsx)(N,{}),this.state.error&&Object(s.jsx)(O,{status:this.state.error.status,text:this.state.error.statusText}),!!this.state.movies.length&&Object(s.jsx)(_.a,{exact:!0,path:"/",render:function(){return Object(s.jsx)(v,{movies:e.state.movies,searchQuery:e.state.searchQuery,sort:e.state.sort})}}),Object(s.jsx)(_.a,{path:"/:id",component:y})]})]})}}]),r}(i.a.Component),D=(r(59),Object(s.jsxs)(j.a,{basename:"/",children:[" ",Object(s.jsx)(w,{})," "]}));c.a.render(D,document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.a1fa9755.chunk.js.map